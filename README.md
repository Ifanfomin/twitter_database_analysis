# twitter_database_analysis
1. Создание базы данных:

1.1. Что такое база данных:

Для создания базы, сначала разберёмся - что это такое? База данных – совокупность данных, хранящихся и упорядоченных в соответствии с определённой структурой. Структура, в свою очередь, определяет то, каким образом данные будут располагаться и как к ним будет предоставляться доступ. Проще говоря — обычная таблица с возможностью настройки условий на столбцы.

Вот кусочек будущей базы:
![image](https://user-images.githubusercontent.com/129762316/230776008-27e9379f-713a-49cd-b062-b0f5da5a53b2.png)

1.2. Создание и настройка пустой базы:
Для создания пустой базы я воспользовался простеньким браузером баз данных на SQL, он находиться в открытом доступе в интернете и в целом имеется множество аналогов, созданных для упрощения данного процесса. Упрощением пользуюсь из-за того, что помощью кода неудобно создавать и настраивать столбцы, тем более, что это понадобится лишь единожды — для создания и настройки столбцов базы.

Data Base Browser:
![image](https://user-images.githubusercontent.com/129762316/230781495-86c977c8-cfbe-4c89-90fa-d3cc9d2ca1d6.png)

Код для создания базы:

![image](https://user-images.githubusercontent.com/129762316/230781531-8ed1bb56-12cb-4ece-8390-ec81cee7367f.png)

2. Заполнение созданный базы:

2.1. Что такое СУБД и SQL:

Файл, найденный в интернете, имеет расширение json, т.е текстовый формат обмена данными, основанный на JavaScript. Файл был плохо структурирован, что мешало анализировать данные. Для выхода из этой ситуации создадим базу данных в удобном для анализа расширении db (data base) и наполним её данными из найденного файла, параллельно структурируя данные. Структурирование и управление базы происходит с помощью СУБД (системы управления базой данных), она позволяет создавать, удалять, изменять и делать любые манипуляции с данными. Для отправления запросов в СУБД будет использоваться отдельный язык - SQL, язык запросов, предоставляющий возможность манипулировать информацией в базе данных.

Вот найденный файл json:

![image](https://user-images.githubusercontent.com/129762316/230782387-d9265d60-bc1f-4548-9723-e0e75b6d0021.png)


2.2. Обход ограничений ресурсов компьютера:

Подключившись к пустой базе в своей программе открываем найденный файл в оперативной памяти и начинаем её парсить в ранее открытое хранилище, но продлевается данный процесс не долго, файл, выгруженный в память, весит так много, что занимает все ресурсы системы и тормозит весь компьютер вплоть до системной остановки процесса или отключения компьютера. Для избежания данной проблемы выгружаем в оперативную память только одну строку исходного файла, достаём из неё нужные данные, сохраняем в нашу базу и освобождаем память для нового цикла, пока не будут перенесены все строки найденного в интернете файла.

Вот основные его части:

![image](https://user-images.githubusercontent.com/129762316/230783452-c2526b23-8fb1-4e94-83c4-cdda8defaac3.png)

![image](https://user-images.githubusercontent.com/129762316/230783542-11b15cb9-d0de-472f-8a94-3982395dd51b.png)

2.3. Решение проблемных мест исходного файла:

В процессе заполнения новой базы оказалось, что в исходном файле иногда столбцы с email отсутствовали, а вместо них был столбец с номером телефона. Выходом стала обычная проверка на наличие или отсутствие того или иного столбца перед отправлением запроса. Также находились строки, заполненные иероглифами в несколько десятков символов. Данных строк было четыре из пяти миллионов, так что самым простым решением был их пропуск.

Вот одна из таких:

![image](https://user-images.githubusercontent.com/129762316/230782712-40969742-66bb-4c2d-ac5f-32970e4dbe98.png)

3.  Поиск информации внутри созданной базы:

3.1 Количество регистраций за год, день или час:

Итак, у меня есть систематизированная база данных, как теперь на достать из неё информацию? Изначально я хотел отправлять запросы в нашу базу построчно, но ещё немного изучив виды запросов SQL нашёл функцию, позволяющую делать запрос на поиск по всей базе, при том, что он будет построчным и не станет сильно использовать ресурсы компьютера. Поиск производился только по одному столбцу, который содержал в себе полную дату регистрации пользователя, и считал только те строки, которые содержали нужный год, день недели или час дня. Теперь я мог одним запросом найти количество пользователей в нужную мне дату.

Вот пример такого запроса:

![image](https://user-images.githubusercontent.com/129762316/230783314-20ff654d-1af8-46b4-9743-36cb5c304d9b.png)

3.2 Количество регистраций за нужный промежуток:

Чтобы получить ещё больше информации логичнее всего было рассматривать нужный нам промежуток и строить график по частоте регистраций. Простым способом будет сделать цикл, перебирающий выбранные года, дни или часы, и отправляющий по очереди по одному запросу. Теперь мы просто сохраняем ответы и строим по ним график с помощью простой библиотеки — matplotlib, она требует на вход данные точек, названия осей и строит по ним график.

Функция для перебора нужных лет:

![image](https://user-images.githubusercontent.com/129762316/230783842-637cc6ae-96af-4d44-a79c-f6b9223d20b8.png)

Функция для построения графика:

![image](https://user-images.githubusercontent.com/129762316/230783867-66cd4da3-797c-479a-b092-953d7b7e0752.png)

4. Простая реализация удобного способа отправления запросов:

4.1. Что такое argparse:

Наша программа успешно выполняет свою работу, но для её использования нам требуется изменять файл либо использовать отдельно файлы для нужной функции. Также требуется запуск файла из специальной среды. Для облегчения данного процесса нужно реализовать простой и удобный способ отправки запросов с возможностью выбора функции. В этом мне помогла библиотека argparse, представляющая из себя набор функций для принятия запросов из командной строки консоли.

Вот пример запроса из консоли:

![image](https://user-images.githubusercontent.com/129762316/230784653-97fb04f6-c5cd-40c6-980b-dde34b4da9e9.png)

4.2. Создание шаблона запроса:

Идея заключается в том, чтобы одной строкой в консоли можно было получить нужный нам график. Представим, что мы не знаем, что может выполнять наша программа, для этого мы отправляем простую команду помощи, выводящую варианты функций и возможные для исследования промежутки. Теперь мы вводим нужную нам функцию и промежуток, отправляем запрос в нашу программу и после обработки получаем ответ. Для реализации данной программы я выношу все действия в функции и ,при получении запроса, условиями отправляю данные в нужную часть программы.

Вот варианты при запросе помощи:

![image](https://user-images.githubusercontent.com/129762316/230785937-50852afb-43c3-4fc7-9554-844ea5bcce0f.png)






