# twitter_database_analysis
1. Создание базы данных:

1.1. Что такое база данных:

Для создания базы, сначала разберёмся - что это такое? База данных – совокупность данных, хранящихся и упорядоченных в соответствии с определённой структурой. Структура, в свою очередь, определяет то, каким образом данные будут располагаться и как к ним будет предоставляться доступ. Проще говоря — обычная таблица с возможностью настройки условий на столбцы.

![image](https://user-images.githubusercontent.com/129762316/230776008-27e9379f-713a-49cd-b062-b0f5da5a53b2.png)
рис. 1

1.2. Создание и настройка пустой базы:
Для создания пустой базы я воспользовался простеньким браузером баз данных на SQL, он находиться в открытом доступе в интернете и в целом имеется множество аналогов, созданных для упрощения данного процесса. Упрощением пользуюсь из-за того, что помощью кода неудобно создавать и настраивать столбцы, тем более, что это понадобится лишь единожды — для создания и настройки столбцов базы.


![image](https://user-images.githubusercontent.com/129762316/230781495-86c977c8-cfbe-4c89-90fa-d3cc9d2ca1d6.png)
рис. 2

![image](https://user-images.githubusercontent.com/129762316/230781531-8ed1bb56-12cb-4ece-8390-ec81cee7367f.png)
рис. 3

2. Заполнение созданный базы:

2.1. Что такое СУБД и SQL:

Файл, найденный в интернете, имеет расширение json, т.е текстовый формат обмена данными, основанный на JavaScript. Файл был плохо структурирован, что мешало анализировать данные. Для выхода из этой ситуации создадим базу данных в удобном для анализа расширении db (data base) и наполним её данными из найденного файла, параллельно структурируя данные. Структурирование и управление базы происходит с помощью СУБД (системы управления базой данных), она позволяет создавать, удалять, изменять и делать любые манипуляции с данными. Для отправления запросов в СУБД будет использоваться отдельный язык - SQL, язык запросов, предоставляющий возможность манипулировать информацией в базе данных.

![image](https://user-images.githubusercontent.com/129762316/230782387-d9265d60-bc1f-4548-9723-e0e75b6d0021.png)
рис. 4

2.2. Обход ограничений ресурсов компьютера:

Подключившись к пустой базе в своей программе открываем найденный файл в оперативной памяти и начинаем её парсить в ранее открытое хранилище, но продлевается данный процесс не долго, файл, выгруженный в память, весит так много, что занимает все ресурсы системы и тормозит весь компьютер вплоть до системной остановки процесса или отключения компьютера. Для избежания данной проблемы выгружаем в оперативную память только одну строку исходного файла, достаём из неё нужные данные, сохраняем в нашу базу и освобождаем память для нового цикла, пока не будут перенесены все строки найденного в интернете файла.

![image](https://user-images.githubusercontent.com/129762316/230783452-c2526b23-8fb1-4e94-83c4-cdda8defaac3.png)
рис. 5

![image](https://user-images.githubusercontent.com/129762316/230783542-11b15cb9-d0de-472f-8a94-3982395dd51b.png)
рис. 6

2.3. Решение проблемных мест исходного файла:

В процессе заполнения новой базы оказалось, что в исходном файле иногда столбцы с email отсутствовали, а вместо них был столбец с номером телефона. Выходом стала обычная проверка на наличие или отсутствие того или иного столбца перед отправлением запроса. Также находились строки, заполненные иероглифами в несколько десятков символов. Данных строк было четыре из пяти миллионов, так что самым простым решением был их пропуск.

![image](https://user-images.githubusercontent.com/129762316/230782712-40969742-66bb-4c2d-ac5f-32970e4dbe98.png)
рис. 7

3.  Поиск информации внутри созданной базы:

3.1 Количество регистраций за год, день или час:

Итак, у меня есть систематизированная база данных, как теперь на достать из неё информацию? Изначально я хотел отправлять запросы в нашу базу построчно, но ещё немного изучив виды запросов SQL нашёл функцию, позволяющую делать запрос на поиск по всей базе, при том, что он будет построчным и не станет сильно использовать ресурсы компьютера. Поиск производился только по одному столбцу, который содержал в себе полную дату регистрации пользователя, и считал только те строки, которые содержали нужный год, день недели или час дня. Теперь я мог одним запросом найти количество пользователей в нужную мне дату.

![image](https://user-images.githubusercontent.com/129762316/230783314-20ff654d-1af8-46b4-9743-36cb5c304d9b.png)
рис. 8

3.2 Количество регистраций за нужный промежуток:

Чтобы получить ещё больше информации логичнее всего было рассматривать нужный нам промежуток и строить график по частоте регистраций. Простым способом будет сделать цикл, перебирающий выбранные года, дни или часы, и отправляющий по очереди по одному запросу. Теперь мы просто сохраняем ответы и строим по ним график с помощью простой библиотеки — matplotlib, она требует на вход данные точек, названия осей и строит по ним график.

![image](https://user-images.githubusercontent.com/129762316/230783842-637cc6ae-96af-4d44-a79c-f6b9223d20b8.png)
рис. 9

![image](https://user-images.githubusercontent.com/129762316/230783867-66cd4da3-797c-479a-b092-953d7b7e0752.png)
рис. 10

4. Простая реализация удобного способа отправления запросов:

4.1. Что такое argparse:

Наша программа успешно выполняет свою работу, но для её использования нам требуется изменять файл либо использовать отдельно файлы для нужной функции. Также требуется запуск файла из специальной среды. Для облегчения данного процесса нужно реализовать простой и удобный способ отправки запросов с возможностью выбора функции. В этом мне помогла библиотека argparse, представляющая из себя набор функций для принятия запросов из командной строки консоли.

![image](https://user-images.githubusercontent.com/129762316/230784653-97fb04f6-c5cd-40c6-980b-dde34b4da9e9.png)
рис. 11

4.2. Создание шаблона запроса:

Идея заключается в том, чтобы одной строкой в консоли можно было получить нужный нам график. Представим, что мы не знаем, что может выполнять наша программа, для этого мы отправляем простую команду помощи, выводящую варианты функций и возможные для исследования промежутки. Теперь мы вводим нужную нам функцию и промежуток, отправляем запрос в нашу программу и после обработки получаем ответ. Для реализации данной программы я выношу все действия в функции и ,при получении запроса, условиями отправляю данные в нужную часть программы.

![image](https://user-images.githubusercontent.com/129762316/230785937-50852afb-43c3-4fc7-9554-844ea5bcce0f.png)
рис. 12

5. Анализ базы данных по построенным графикам:

5.1. Графики по регистрациям со всего мира:

5.1.1 График по годам:

![график по годам в процентах](https://user-images.githubusercontent.com/129762316/230916034-b40ebd91-5d09-42ce-aac6-844bcac4fef4.png)
рис. 13

Первые три года социальная сеть не имела особой популярности, полным ходом шла разработка и распространение на различных внутререгионных мероприятиях. В 2008 году сеть начали использовать журналисты и политики и уже за 2009 год было зарегистрировано 7% от всех пользователей: 330 миллионов. Дальше, как видно из графика, твиттер набрал огромные обороты и стал популярен во всём мире, а набрав за 2011-2012 года пользователей основная волна регистраций была пройдена и количество годовых регистраций начало сильно падать.

5.1.2 График по дням недели:

![график по дням недели в процентах](https://user-images.githubusercontent.com/129762316/230920526-e4e6f68c-b1ba-403b-aaf6-1da53f9cd9b2.png)
рис. 14

Данный график показался мне самым необычным из всех. Оказалось, что люди чаще всего пользуются социальными сетями в будние дни, конкретнее в среду. Скорее всего это происходит из-за того, что после работы людям хочется максимально отвлечся от всех дел и окунуться в новости и прессу. Ну а реже всего, как видим из графика, заходят по субботам и своскресеньям. Объясняется это тем, что на данные дни обычно больше всего планов: убраться по дому, сходить в кино, магазин и т.д.

5.1.3. График общей внутрисуточной активности:

![график по времени суток с 0 ночи в процентах](https://user-images.githubusercontent.com/129762316/230922718-28de754e-11e1-41cb-b62e-e42041483711.png)
рис. 15

По данному графику замечаем большой просадок в интервале от 7 и до 9 утра. Видно к данному времени все уже спят и, конечно, не заходят в социальную сеть. Из этого вывода начнём отсёт с 8 утра, чтобы сразу увидеть все изменения в течении общего дня.

![график по времени суток с 8 утра в процентахpng](https://user-images.githubusercontent.com/129762316/230923788-cf0c7895-8fdf-43f9-9e66-c8e196701acf.png)
рис. 16

Теперь видно два всплеска. Превый происходит с 11 утра и до 15 часов дня, после чего держится вплоть до 19 часов вечера и идёт на спад, часть людей идёт спать. И второй всплеск виден уже в 1 и 2 час ночи и обусловлен обычным, бессмысленным просмотром прессы после обыденных вечерних дел. Дальше и оставшаяся часть засыпает, начиная новый цикл.

5.1.4. График внутрисуточной активности по дням недели:

![внутрисуточная активность по дням недели](https://user-images.githubusercontent.com/129762316/232316606-d5b3ae2c-8d4f-4d83-912a-376875a355d7.png)
рис. 17

По графику видим, что понедельник и вторник не сильно выделяются, находятся где-то между остальных графиков. Среда выделяется наибольшей активностью в ночное время и наименьшей утром, но тоже не сильно. Четверг и пятница имеют наименьшую активность в вечернее время, скорее всего люди хотят хорошо выспаться на выходных. Начало субботы и воскресенья необычны практически полным отсутствием второго, ночного, всплеска. Объясняется это тем, что перед выходным днём все ложаться спать пораньше. Но также выходные особенны наибольшей утренней активностью, обусловленные не рабочим днём.

5.2. Графики по регистрациям с основных регионов Евразии:
5.2.1. Гистограмма количества регистраций по регионам:

![диаграмма регистраций по регионам](https://user-images.githubusercontent.com/129762316/232312990-d2b31a2f-d089-4e9e-af8a-a69bf8e56136.png)
рис. 18

Взяты были такие регионы Евразии, как: Япония, Китай, Соединённое Королевство, Россия, Украина, Франция и Германия. Выбор делался на основе расстояния между странами и их важности в мировых сферах. Как видим, среди выбраных стран, твиттер наиболее распространён в Германии и наименее в восточных странах: Китай, Япония. Но остальные страны находятся примерно на одном уровне. Данная информация не в совершенстве точная, т.к. в твиттере со временем менялся способ указания региона и пользователи могли указывать либо что угодно, либо вообще ничего не указывать.

5.2.2. График внутрисуточной активности по регионам:

![регионы за время суток](https://user-images.githubusercontent.com/129762316/232316507-84d595ed-35c2-4318-8e32-dc40a63722db.png)
рис. 19

Графики очень разные, но это было ожидаемо, ведь взяты страны с совершенно различными часовыми поясами. Япония и Китай имеют рост к трем часам ночи и спад в три часа дня, это логично, ведь в данных странах часовые пояса UTC+8 и +9. Соединённое Королевство, в свою очередь, имеет рост в шесть утра и спад только к десяти вечера. Здесь наоборот UTC+1. График регистраций России идёт рядом с графиком Франции. Он плавно начинает рост в пять утра и меняет направление только к десяти вечера. Украина и Гремания имеют похожие графики, только с разницей в один два часа. Они больше других сходны с графиком внутрисуточной активности: подъём с восьми утра и спад с восьми вереча.













